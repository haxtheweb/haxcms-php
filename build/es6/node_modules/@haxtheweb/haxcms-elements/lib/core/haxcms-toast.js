import{autorun as t,toJS as s}from"../../../../mobx/dist/mobx.esm.js";import{css as a}from"../../../../lit/index.js";import{store as o}from"./haxcms-site-store.js";import{RPGCharacterToast as e}from"../../../app-hax/lib/rpg-character-toast/rpg-character-toast.js";export class HAXCMSToast extends e{static get tag(){return"haxcms-toast"}static get styles(){return[super.styles,a`
      :host {
        transform: scale(.7);
        background-color: var(--simple-toast-background-color, light-dark(white, black));
      }
      `]}constructor(){super(),this.windowControllers=new AbortController,t((()=>{this.userName=s(o.userData.userName)})),t((()=>{this.darkMode=s(o.darkMode)}))}connectedCallback(){super.connectedCallback(),globalThis.addEventListener("haxcms-toast-hide",this.hideSimpleToast.bind(this),{signal:this.windowControllers.signal}),globalThis.addEventListener("haxcms-toast-show",this.showSimpleToast.bind(this),{signal:this.windowControllers.signal})}hideSimpleToast(t){this.alwaysvisible||(this.style.animation="forcedfadeout 0.6s .3s",this.awaitingMerlinInput=!1,setTimeout((()=>{this.hide()}),0))}disconnectedCallback(){this.windowControllers.abort(),super.disconnectedCallback()}}globalThis.customElements.define(HAXCMSToast.tag,HAXCMSToast),globalThis.HAXCMSToast=globalThis.HAXCMSToast||{},globalThis.HAXCMSToast.requestAvailability=()=>(globalThis.HAXCMSToast.instance||(globalThis.HAXCMSToast.instance=globalThis.document.createElement(HAXCMSToast.tag),globalThis.document.body.appendChild(globalThis.HAXCMSToast.instance)),globalThis.HAXCMSToast.instance);export const HAXCMSToastInstance=globalThis.HAXCMSToast.requestAvailability();