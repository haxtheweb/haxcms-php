/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
export class ESGlobalBridge{constructor(){this.imports={},this.webpack=!1,this.import=(t,i,l=!1)=>this.load(t,i,l),this.load=(t,i,l=!1)=>{let e=this.imports[t],o=!l&&this.webpack&&this.webpack[t];return new Promise(o||e?(i,l)=>{i(this.imports[t])}:(l,e)=>{const o=globalThis.document.createElement("script");o.src=i,o.setAttribute("data-name",t),this.imports[t]=i,o.onload=()=>{l(this.imports[t]),this.imports[t]=!0,setTimeout((()=>{const l=new CustomEvent(`es-bridge-${t}-loaded`,{bubbles:!0,cancelable:!0,detail:{name:t,location:i}});globalThis.document.dispatchEvent(l)}),100)},o.onerror=()=>{e(new Error(`Failed to load ${t} script with location ${i}.`)),delete this.imports[t],this.imports[t]=!1},globalThis.document.documentElement.appendChild(o)})}}}globalThis.ESGlobalBridge=globalThis.ESGlobalBridge||{},globalThis.ESGlobalBridge.requestAvailability=()=>(globalThis.ESGlobalBridge.instance||(globalThis.ESGlobalBridge.instance=new ESGlobalBridge),globalThis.ESGlobalBridge.instance);export const ESGlobalBridgeStore=globalThis.ESGlobalBridge.requestAvailability();