/**
 * Copyright 2023 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as t,html as e,css as i}from"../../lit/index.js";class SpotifyEmbed extends t{constructor(){super(),this.source=null,this.theme=null,this.size="normal",this.playlistid=null,this.type=null,this.editing=!1}static get properties(){return{source:{type:String},theme:{type:String},size:{type:String},playlistid:{type:String,attribute:!1},type:{type:String,attribute:!1},editing:{type:Boolean,reflect:!0}}}static get styles(){return[i`
        :host {
          display: block;
        }
        :host([editing]) .container {
          z-index: 1;
        }
        :host([editing]) iframe {
          z-index: -1;
          pointer-events: none;
        }
      `]}render(){return e`
      <div class="container">
        <iframe
          src="https://open.spotify.com/embed/${this.type}/${this.playlistid}?utm_source=generator${this.theme?`&theme=${this.theme}`:""}"
          title="Spotify Song Embed"
          height="${"normal"==this.size?"352":"152"}"
          style="border-radius:12px"
          width="100%"
          part="iframe"
          frameborder="0"
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
          loading="lazy"
          decoding="async"
          fetchpriority="low"
        ></iframe>
      </div>
    `}static get tag(){return"spotify-embed"}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{if("source"===e&&this[e]){let t=this[e].split("/").pop().split("?")[0];this.playlistid=t,this[e].includes("/album/")?this.type="album":this[e].includes("/track/")?this.type="track":this[e].includes("/playlist/")?this.type="playlist":this[e].includes("/artist/")&&(this.type="artist")}}))}haxHooks(){return{preProcessNodeToContent:"haxpreProcessNodeToContent",editModeChanged:"haxeditModeChanged",activeElementChanged:"haxactiveElementChanged"}}async haxpreProcessNodeToContent(t){return t.editing=!1,t}haxactiveElementChanged(t,e){return this.editing=!0,t.editing=!0,t}haxeditModeChanged(t){this.editing=t}static get haxProperties(){return new URL(`./lib/${this.tag}.haxProperties.json`,import.meta.url).href}}globalThis.customElements.define(SpotifyEmbed.tag,SpotifyEmbed);export{SpotifyEmbed};